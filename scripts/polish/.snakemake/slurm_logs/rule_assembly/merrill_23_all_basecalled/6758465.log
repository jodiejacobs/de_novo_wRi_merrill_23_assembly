host: phoenix-06.prism
Building DAG of jobs...
Using shell: /usr/bin/bash
Provided remote nodes: 1
Provided resources: mem_mb=100000, mem_mib=95368, disk_mb=9969, disk_mib=9508
Select jobs to execute...
Execute 1 jobs...

[Thu Mar  6 10:49:32 2025]
rule assembly:
    input: /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.Dsim.fastq.gz, /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.wRi.fastq.gz
    output: /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/assembly.fasta, /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/wRi/assembly.fasta
    jobid: 0
    reason: Forced execution
    wildcards: sample=merrill_23_all_basecalled
    threads: 16
    resources: mem_mb=100000, mem_mib=95368, disk_mb=9969, disk_mib=9508, tmpdir=<TBD>, slurm_partition=medium, runtime=200

host: phoenix-06.prism
Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 16
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=100000, mem_mib=95368, disk_mb=9969, disk_mib=9508
Select jobs to execute...
Execute 1 jobs...

[Thu Mar  6 10:49:33 2025]
localrule assembly:
    input: /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.Dsim.fastq.gz, /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.wRi.fastq.gz
    output: /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/assembly.fasta, /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/wRi/assembly.fasta
    jobid: 0
    reason: Forced execution
    wildcards: sample=merrill_23_all_basecalled
    threads: 16
    resources: mem_mb=100000, mem_mib=95368, disk_mb=9969, disk_mib=9508, tmpdir=/data/tmp, slurm_partition=medium, runtime=200

[2025-03-06 10:49:33] INFO: Starting Flye 2.9.5-b1801
[2025-03-06 10:49:33] INFO: >>>STAGE: configure
[2025-03-06 10:49:33] INFO: Configuring run
[2025-03-06 10:51:08] INFO: Total read length: 5702836847
[2025-03-06 10:51:08] INFO: Input genome size: 180000000
[2025-03-06 10:51:08] INFO: Estimated coverage: 31
[2025-03-06 10:51:08] INFO: Reads N50/N90: 2017 / 444
[2025-03-06 10:51:08] INFO: Minimum overlap set to 1000
[2025-03-06 10:51:08] INFO: >>>STAGE: assembly
[2025-03-06 10:51:08] INFO: Assembling disjointigs
[2025-03-06 10:51:08] INFO: Reading sequences
[2025-03-06 10:52:26] INFO: Building minimizer index
[2025-03-06 10:52:26] INFO: Pre-calculating index storage
0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 
[2025-03-06 10:52:54] INFO: Filling index
0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 
[2025-03-06 10:53:32] INFO: Extending reads
[2025-03-06 10:53:43] INFO: Overlap-based coverage: 20
[2025-03-06 10:53:43] INFO: Median overlap divergence: 0.0292056
0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 
[2025-03-06 11:03:21] INFO: Assembled 2602 disjointigs
[2025-03-06 11:03:22] INFO: Generating sequence
0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 
[2025-03-06 11:03:31] INFO: Filtering contained disjointigs
0% 10% 20% 30% 40% 50% 60% 70% 80% 90% 100% 
[2025-03-06 11:03:43] INFO: Contained seqs: 494
[2025-03-06 11:03:50] INFO: >>>STAGE: consensus
[2025-03-06 11:03:50] INFO: Running Minimap2
[E::bgzf_read] Read block operation failed with error 2 after 0 of 4 bytes
samtools index: failed to create index for "/private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/10-consensus/minimap.bam"
[2025-03-06 11:20:15] ERROR: Error running minimap2, terminating. See the alignment error log  for details: /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/10-consensus/minimap.stderr
[2025-03-06 11:20:15] ERROR: Cmd: flye-minimap2 '/private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/00-assembly/draft_assembly.fasta' '/private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.Dsim.fastq.gz' -x map-ont -t 16 -k 17 -a -p 0.5 -N 10 --sam-hit-only -L -K 5G -z 1000 -Q --secondary-seq -I 64G | flye-samtools view -T '/private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/00-assembly/draft_assembly.fasta' -u - | flye-samtools sort -T '/private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/10-consensus/sort_250306_110350' -O bam -@ 4 -l 1 -m 4G -o '/private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/10-consensus/minimap.bam'
[2025-03-06 11:20:15] ERROR: Command 'flye-samtools index -@ 4 '/private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/10-consensus/minimap.bam'' returned non-zero exit status 1.
[2025-03-06 11:20:15] ERROR: Pipeline aborted
[Thu Mar  6 11:20:15 2025]
Error in rule assembly:
    jobid: 0
    input: /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.Dsim.fastq.gz, /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.wRi.fastq.gz
    output: /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/assembly.fasta, /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/wRi/assembly.fasta
    shell:
         
            mkdir -p /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/
            mkdir -p /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/wRi/   
            flye --nano-hq /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.Dsim.fastq.gz -t 16 --out-dir /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/ --genome-size 180m
            flye --nano-hq /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.wRi.fastq.gz -t 16 --out-dir /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/wRi/ --genome-size 1.2m
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Storing output in storage.
WorkflowError:
At least one job did not complete successfully.
srun: error: phoenix-06: task 0: Bus error (core dumped)
[Thu Mar  6 11:20:15 2025]
Error in rule assembly:
    jobid: 0
    input: /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.Dsim.fastq.gz, /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.wRi.fastq.gz
    output: /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/assembly.fasta, /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/wRi/assembly.fasta
    shell:
         
            mkdir -p /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/
            mkdir -p /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/wRi/   
            flye --nano-hq /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.Dsim.fastq.gz -t 16 --out-dir /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/Dsim/ --genome-size 180m
            flye --nano-hq /private/groups/russelllab/jodie/merrill_23_wRi_genome/nanopore_data/basecalled/merrill_23_all_basecalled.wRi.fastq.gz -t 16 --out-dir /private/groups/russelllab/jodie/merrill_23_wRi_genome/flye/merrill_23_all_basecalled/wRi/ --genome-size 1.2m
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Storing output in storage.
WorkflowError:
At least one job did not complete successfully.
Bus error (core dumped)
